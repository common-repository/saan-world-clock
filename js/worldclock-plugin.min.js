jQuery(document).ready((function(){var deviceTime,serverTime,actualTime,timeOffset;function updateDisplay(){jQuery(".wc_time").each((function(index,obj){/\d/.test(jQuery(this).data("wcTimezone"))?jQuery(this).text(moment().utcOffset(jQuery(this).data("wcTimezone")).format(jQuery(this).data("wcFormat"))):jQuery(this).text(actualTime.tz(jQuery(this).data("wcTimezone")).format(jQuery(this).data("wcFormat")))}))}function timerHandler(){(actualTime=moment()).add(timeOffset),updateDisplay(),setTimeout(timerHandler,1e3-(new Date).getTime()%1e3)}function fetchServerTime(){var xmlhttp=new XMLHttpRequest;xmlhttp.onload=function(){var dateHeader=xmlhttp.getResponseHeader("Date");deviceTime=moment(),serverTime=moment(new Date(dateHeader)),timeOffset=serverTime.diff(moment()),timerHandler()},xmlhttp.open("HEAD",window.location.href),xmlhttp.send()}moment.locale(jQuery(".wc_time").data("wc-language")),fetchServerTime()}));